<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Exercise
Implement in software an image processing web app supporting different image kernels and supporting:
Image histogram visualization. Different lightness (coloring brightness) tools. Kernel transformations # Kernel transformation with convolution is a technique used in image processing to apply a filter or transformation to an image. In this technique, a small matrix, called a kernel or filter, is moved over the image, and for each pixel, the values of neighboring pixels are multiplied by the corresponding values in the kernel, and the results are summed up."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Exercise
Implement in software an image processing web app supporting different image kernels and supporting:
Image histogram visualization. Different lightness (coloring brightness) tools. Kernel transformations # Kernel transformation with convolution is a technique used in image processing to apply a filter or transformation to an image. In this technique, a small matrix, called a kernel or filter, is moved over the image, and for each pixel, the values of neighboring pixels are multiplied by the corresponding values in the kernel, and the results are summed up."><meta property="og:type" content="article"><meta property="og:url" content="https://sergio-sanchezo.github.io/showcase/docs/shortcodes/visual-illusions/masking/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-03-14T22:50:36-05:00"><title>Masking | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><input type=checkbox id=section-28af9825a6c9a42a944ad080d209e122 class=toggle>
<label for=section-28af9825a6c9a42a944ad080d209e122 class="flex justify-between"><a href=/showcase/docs/shortcodes/miembros/>Miembros</a></label><ul><li><a href=/showcase/docs/shortcodes/miembros/Arturo-Ascarza/>Arturo Ascarza</a></li><li><a href=/showcase/docs/shortcodes/miembros/Carlos-Cortes/>Carlos Cortes</a></li><li><a href=/showcase/docs/shortcodes/miembros/Sergio-Sanchez/>Sergio Sanchez</a></li></ul></li><li><input type=checkbox id=section-ec67a64aba70b9df3d2a9acd6c92e3bc class=toggle>
<label for=section-ec67a64aba70b9df3d2a9acd6c92e3bc class="flex justify-between"><a href=/showcase/docs/shortcodes/p5/>P5</a></label><ul><li><a href=/showcase/docs/shortcodes/p5/iframe/>Iframe</a></li><li><a href=/showcase/docs/shortcodes/p5/div/>Div</a></li></ul></li><li><a href=/showcase/docs/shortcodes/tabs/>Tabs</a></li><li><input type=checkbox id=section-f46a4e810e0595032edc1fcc1384d4ee class=toggle checked>
<label for=section-f46a4e810e0595032edc1fcc1384d4ee class="flex justify-between"><a href=/showcase/docs/shortcodes/visual-illusions/>Visual Illusions</a></label><ul><li><a href=/showcase/docs/shortcodes/visual-illusions/monocular_cues/>Monocular Cues</a></li><li><a href=/showcase/docs/shortcodes/visual-illusions/aplications_visual_phenomena/>Aplications Visual Phenomena</a></li><li><a href=/showcase/docs/shortcodes/visual-illusions/moire_kinegram/>Moire Kinegram</a></li><li><a href=/showcase/docs/shortcodes/visual-illusions/masking/ class=active>Masking</a></li></ul></li></ul></li></ul><ul><li><a href=/showcase/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Masking</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#kernel-transformations>Kernel transformations</a><ul><li><a href=#example>Example</a></li></ul></li></ul></nav></aside></header><article class=markdown><blockquote class="book-hint info"><p><strong>Exercise</strong><br>Implement in software an image processing web app supporting different image kernels and supporting:</p><ul><li>Image histogram visualization.</li><li>Different lightness (coloring brightness) tools.</li></ul></blockquote><h1 id=kernel-transformations>Kernel transformations
<a class=anchor href=#kernel-transformations>#</a></h1><p>Kernel transformation with convolution is a technique used in image processing to apply a filter or transformation to an image. In this technique, a small matrix, called a kernel or filter, is moved over the image, and for each pixel, the values of neighboring pixels are multiplied by the corresponding values in the kernel, and the results are summed up. The resulting value is then assigned to the central pixel. This process is repeated for all pixels in the image, resulting in a transformed image.</p><table><thead><tr><th style=text-align:center><strong>Key</strong></th><th style=text-align:center><strong>Action</strong></th></tr></thead><tbody><tr><td style=text-align:center>r</td><td style=text-align:center>Show kernel for edge detection</td></tr><tr><td style=text-align:center>s</td><td style=text-align:center>Show kernel for sharpen filter</td></tr><tr><td style=text-align:center>b</td><td style=text-align:center>Show kernel for blur filter</td></tr><tr><td style=text-align:center>o</td><td style=text-align:center>Show original image</td></tr></tbody></table><h2 id=example>Example
<a class=anchor href=#example>#</a></h2><iframe id=breath style=width:625px;height:625px srcdoc='
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script>
              

let filteredImg;
let originalPixels;
let img;
const matrixsize = 3;
let brightnessValue = 0;

function preload() {
  img = loadImage("https://picsum.photos/550");
}

function setup() {
  createCanvas(img.width, img.height);
  pixelDensity(1);
  img.loadPixels();
  originalPixels = img.pixels.slice();

  // Create a slider for brightness
  brightnessSlider = createSlider(-15, 15, 0, 2);
  brightnessSlider.position(10, height + 10);
  brightnessSlider.style("width", "300px");
  brightnessSlider.input(() => {
    brightnessValue = brightnessSlider.value();
    applyBrightness();
  });
}

function getFilteredImage(img, matrix, matrixsize) {
  // create a filtered image by convolving the original image
  filteredImg = createImage(img.width, img.height);
  filteredImg.loadPixels();
  for (let x = 0; x < img.width; x++) {
    for (let y = 0; y < img.height; y++) {
      let c = convolution(x, y, matrix, matrixsize, img);
      let loc = (x + y * img.width) * 4;
      filteredImg.pixels[loc] = red(c);
      filteredImg.pixels[loc + 1] = green(c);
      filteredImg.pixels[loc + 2] = blue(c);
      filteredImg.pixels[loc + 3] = alpha(c);
    }
  }
  filteredImg.updatePixels();
}

function changeBrightness(img, key) {
  if (key === 1) {
    brightnessValue += 10;
  } else if (key === 2) {
    brightnessValue -= 10;
  }
  applyBrightness();
}

function applyBrightness() {
  img.loadPixels();
  for (let i = 0; i < img.pixels.length; i += 4) {
    let r = img.pixels[i] + brightnessValue;
    let g = img.pixels[i + 1] + brightnessValue;
    let b = img.pixels[i + 2] + brightnessValue;
    img.pixels[i] = constrain(r, 0, 255);
    img.pixels[i + 1] = constrain(g, 0, 255);
    img.pixels[i + 2] = constrain(b, 0, 255);
  }
  img.updatePixels();
}

function keyPressed() {
  if (key === "r") {
    const matrix = [
      [-1, -1, -1],
      [-1, 8, -1],
      [-1, -1, -1],
    ];
    getFilteredImage(img, matrix, matrixsize);
  } else if (key === "s") {
    const matrix = [
      [0, -1, 0],
      [-1, 5, -1],
      [0, -1, 0],
    ];
    getFilteredImage(img, matrix, matrixsize);
  } else if (key === "b") {
    const matrix = [
      [1 / 9, 1 / 9, 1 / 9],
      [1 / 9, 1 / 9, 1 / 9],
      [1 / 9, 1 / 9, 1 / 9],
    ];
    getFilteredImage(img, matrix, matrixsize);
  } else if (key === "1") {
    changeBrightness(img, 1);
  } else if (key === "2") {
    changeBrightness(img, 2);
  } else if (key === "o") {
    // reset the image to the original pixels
    img.pixels.set(originalPixels);
    img.updatePixels();
    brightnessSlider.value(0);
    filteredImg = null;
  }
}

function draw() {
  if (filteredImg) {
    background(filteredImg);
  } else {
    background(img);
  }
}

function convolution(x, y, matrix, matrixsize, img) {
  let rtotal = 0.0;
  let gtotal = 0.0;
  let btotal = 0.0;
  const offset = Math.floor(matrixsize / 2);
  for (let i = 0; i < matrixsize; i++) {
    for (let j = 0; j < matrixsize; j++) {
      const xloc = x + i - offset;
      const yloc = y + j - offset;
      let loc = (xloc + img.width * yloc) * 4;
      loc = constrain(loc, 0, img.pixels.length - 1);
      rtotal += img.pixels[loc] * matrix[i][j];
      gtotal += img.pixels[loc + 1] * matrix[i][j];
      btotal += img.pixels[loc + 2] * matrix[i][j];
    }
  }
  rtotal = constrain(rtotal, 0, 255);
  gtotal = constrain(gtotal, 0, 255);
  btotal = constrain(btotal, 0, 255);
  return color(rtotal, gtotal, btotal);
}


            </script>
          </head>
          <body>
          </body>
        </html>
      '></iframe></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/sergio-sanchezo/showcase/commit/ffc1c6257e8b38fccb739701fc36230539649dac title='Last modified by Sergio Sanchez | March 15, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>March 15, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#kernel-transformations>Kernel transformations</a><ul><li><a href=#example>Example</a></li></ul></li></ul></nav></div></aside></main></body></html>